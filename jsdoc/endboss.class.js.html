<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: endboss.class.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: endboss.class.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>class Endboss extends MovableObject {
    IMAGES_IDLE = [
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_000.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_001.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_002.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_003.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_004.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_005.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_006.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_007.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_008.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_009.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_010.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_011.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_012.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_013.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_014.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_015.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_016.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Idle/0_Zombie_Villager_Idle_017.png'
    ];

    IMAGES_WALKING = [
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_000.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_001.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_002.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_003.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_004.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_005.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_006.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_007.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_008.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_009.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_010.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_011.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_012.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_013.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_014.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_015.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_016.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_017.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_018.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_019.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_020.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_021.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_022.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Walking/0_Zombie_Villager_Walking_023.png'
    ];

    IMAGES_DYING = [
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_000.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_001.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_002.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_003.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_004.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_005.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_006.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_007.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_008.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_009.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_010.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_011.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_012.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_013.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_014.png'
    ];

    IMAGES_AGGRO = [
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_000.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_001.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_002.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_003.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_004.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_005.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_006.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_007.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_008.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_009.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_010.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Slashing/0_Zombie_Villager_Slashing_011.png'
    ];

    IMAGES_HURTING = [
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_000.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_001.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_002.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_001.png',
        'img/zombie/Zombie_Villager_3/PNG/PNG Sequences/Dying/0_Zombie_Villager_Dying_000.png'
    ];

    world;
    positionX = 3300;
    positionY = -50;
    otherDirection = true;
    width = 450;
    height = 450;
    distance;
    goesBack = false;
    aggroActivated = false;
    hurt = false;
    hurtSound = new Audio('audio/boss-hurt.mp3');
    dyingSound = new Audio('audio/boss-dying.mp3');
    aggroSound = new Audio('audio/endboss-aggro.mp3');

    constructor() {
        super().loadImg(this.IMAGES_IDLE[0]);
        this.loadImages(this.IMAGES_IDLE);
        this.loadImages(this.IMAGES_WALKING);
        this.loadImages(this.IMAGES_DYING);
        this.loadImages(this.IMAGES_AGGRO);
        this.loadImages(this.IMAGES_HURTING);
        this.animate();
        addSoundToGlobalList(this.hurtSound);
        addSoundToGlobalList(this.dyingSound);
        addSoundToGlobalList(this.aggroSound);
    }

    /**
     * Starts the animation cycle for the Endboss, checking for various states
     * like idle, moving, attacking, and dying. Animates the Endboss at 50 frames per second.
     * 
     * @returns {void}
     */
    animate() {
        setInterval(() => {
            this.distanceBetweenCharacterAndEndboss();
            this.endbossIdle();
            this.endbossAggro();
            this.endbossMoving();
            this.endbossGetsHurt();
        }, 1000 / 20);

        let deathInterval = setInterval(() => {
            this.endbossDies(deathInterval);
        }, 1000 / 20);
    }

     /**
     * Calculates the distance between the player character and the Endboss using
     * the world object. Updates the `distance` property.
     * 
     * @returns {void}
     */
    distanceBetweenCharacterAndEndboss() {
        if (this.world &amp;&amp; this.world.character) {
            this.distance = this.world.calculateDistance();
        }
    }

    /**
     * Animates the Endboss in the idle state when the player is far enough away,
     * using the idle image sequence.
     * 
     * @returns {void}
     */
    endbossIdle() {
        if (this.distance >= 280 &amp;&amp; !this.aggroActivated) {
            this.animateImages(this.IMAGES_IDLE);
        }
    }

    /**
     * Triggers the aggro (attack) state when the player gets close enough, 
     * playing the aggro sound and animating the aggro image sequence.
     * 
     * @returns {void}
     */
    endbossAggro() {
        if (this.distance &lt;= 280 &amp;&amp; !this.aggroActivated) {
            this.animateImages(this.IMAGES_AGGRO);
            this.aggroSound.play();
            setTimeout(() => {
                this.aggroActivated = true;
            }, this.IMAGES_AGGRO.length * 200);
        }
    }

     /**
     * Controls the movement of the Endboss, alternating between moving left 
     * and right based on certain conditions.
     * 
     * @returns {void}
     */
    endbossMoving() {
        this.endbossMovesLeft();
        this.endbossMovesRight();
    }

     /**
     * Moves the Endboss left when the player is within a certain range and
     * the Endboss has aggroed. Animates the walking image sequence.
     * 
     * @returns {void}
     */
    endbossMovesLeft() {
        if (!this.goesBack &amp;&amp; this.distance &lt;= 360 &amp;&amp; this.aggroActivated &amp;&amp; !this.dead()) {
            this.animateImages(this.IMAGES_WALKING);
            this.speedX = 20;
            this.moveLeft();
            if (this.positionX &lt;= 2800) {
                this.goesBack = true;
            }

            if (!this.world.character.dead()) {
                this.aggroSound.play();
            }
        }
    }

    /**
     * Moves the Endboss right when it reaches a certain position, animating the 
     * walking image sequence as it retreats.
     * 
     * @returns {void}
     */
    endbossMovesRight() {
        if (this.goesBack &amp;&amp; !this.dead()) {
            this.animateImages(this.IMAGES_WALKING);
            this.speedX = 6;
            this.moveRight();
            if (this.positionX >= 3300) {
                this.goesBack = false;
            }
        }
    }

     /**
     * Animates the Endboss in the hurt state if it has been damaged but is not dead yet,
     * and plays the hurt sound.
     * 
     * @returns {void}
     */
    endbossGetsHurt() {
        if (this.hurtButNotDead()) {
            this.animateImages(this.IMAGES_HURTING);
            this.hurtSound.play();
            setTimeout(() => {
                this.hurt = true;
            }, this.IMAGES_HURTING.length);
        }
    }

     /**
     * Triggers the dying animation for the Endboss when its health reaches zero. 
     * Plays the dying sound and stops further animations once it dies.
     * 
     * @param {number} deathInterval - The interval ID for clearing the death animation.
     * @returns {void}
     */
    endbossDies(deathInterval) {
        if (this.dead()) {
            this.animateImages(this.IMAGES_DYING);
            this.dyingSound.play();
            if (this.currentImg == this.IMAGES_DYING.length) {
                clearInterval(deathInterval);
            }
            setTimeout(() => {
                gameOverWin();
            }, 2000);
        }
    }
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Sat Oct 12 2024 11:05:47 GMT+0200 (Mitteleuropäische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
